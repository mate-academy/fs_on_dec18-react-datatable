{"version":3,"sources":["components/Datatable.js","App.js","index.js"],"names":["Datatable","state","sortColumn","sortAsc","handleHeaderClick","key","_this","props","config","isSortable","setState","_ref","_this2","this","sign","visibleItems","items","sort","item1","item2","value1","value2","localeCompare","react_default","a","createElement","className","Object","entries","map","_ref2","_ref3","slicedToArray","value","onClick","title","item","Datatable_Row","name","React","Component","Row","_ref4","getLink","cellConfig","link","_cellConfig$link$matc","match","field","replace","concat","_ref5","_ref6","Link","to","peopleColumnConfig","isSearchable","born","sex","App","people","fetch","response","json","_this$state","components_Datatable","ReactDOM","render","BrowserRouter","basename","process","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.48a6474d.chunk.js","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\n\n\nclass Datatable extends React.Component {\n  state = {\n    sortColumn: null,\n    sortAsc: true,\n  };\n\n  handleHeaderClick = (key) => {\n    if (!this.props.config[key].isSortable) {\n      return;\n    }\n\n    this.setState(({ sortColumn, sortAsc }) => {\n      return {\n        sortColumn: key,\n        sortAsc: sortColumn === key ? !sortAsc : true,\n      };\n    })\n  };\n\n  render() {\n    const sign = this.state.sortAsc ? 1 : -1;\n\n    const visibleItems = this.state.sortColumn\n      ? this.props.items\n          .sort((item1, item2) => {\n            const value1 = item1[this.state.sortColumn];\n            const value2 = item2[this.state.sortColumn];\n\n            return typeof value1 === 'number'\n              ? sign * (value1 - value2)\n              : sign * value1.localeCompare(value2);\n          })\n      : this.props.items;\n\n    const { config } = this.props;\n\n    return (\n      <div className=\"Datatable\">\n        <table>\n          <thead>\n          <tr>\n            { Object.entries(config).map(([key, value]) => (\n              <th\n                key={key} className={value.isSortable ? 'sortable-column' : ''}\n                onClick={() => this.handleHeaderClick(key)}\n              >\n                {value.title}\n              </th>\n            ))}\n          </tr>\n          </thead>\n\n          <tbody>\n          {visibleItems.map(item =>\n            <Row key={item.name} item={item} config={config} />\n          )}\n          </tbody>\n        </table>\n      </div>\n    )\n  }\n}\n\nconst Row = ({ item, config }) => {\n  const getLink = (cellConfig) => {\n    if (!cellConfig.link) {\n      return '';\n    }\n\n    const [ ,field] = cellConfig.link.match(/\\/:(\\w+)/);\n    return cellConfig.link.replace(`:${field}`, item[field]);\n  };\n\n  return (\n    <tr>\n      { Object.entries(config).map(([key, cellConfig]) => (\n        <td key={key}>\n          { cellConfig.link ? (\n              <Link to={getLink(cellConfig)}>\n                {item[key]}\n              </Link>\n            ) : item[key]\n          }\n        </td>\n      ))}\n    </tr>\n  )\n};\n\nexport default Datatable;\n","import React from 'react';\n\nimport './App.css';\nimport Datatable from './components/Datatable';\n\nconst peopleColumnConfig = {\n  name: {\n    title: 'Имя', // в таблице колонка будет так называться\n    isSortable: true, // Поиск будет проверять эту и последнюю колонки\n    isSearchable: true,\n    link: '/person/:name'\n  },\n  born: {\n    title: 'Год рождения',\n    isSortable: true, // по этой колонке можно сортировать\n  },\n  sex: { // Только для тех ключей которые есть в columnConfig будут колонки в таблице\n    title: 'Пол',\n  }\n};\n\nclass App extends React.Component {\n  state = {\n    people: [],\n    config: peopleColumnConfig,\n  };\n\n  async componentDidMount() {\n    const response = await fetch('https://mate-academy.github.io/fe-program/js/tasks/people/people.json');\n    const people = await response.json();\n\n    this.setState({ people });\n  }\n\n  render () {\n    const { people, config } = this.state;\n\n    return (\n      <div className=\"App\">\n        <h1>Datatable</h1>\n        <Datatable\n          items={people}\n          config={config}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom';\n\n\nReactDOM.render(\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <App />\n  </BrowserRouter>,\n\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}